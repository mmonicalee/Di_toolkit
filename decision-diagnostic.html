<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Decision Impact Diagnostic</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --black: #0D0D0D;
    --gold: #B8922A;
    --gold-light: #D4AA4A;
    --gold-pale: #F5EDD8;
    --white: #FFFFFF;
    --off-white: #FAFAF8;
    --mid-gray: #6B6B6B;
    --light-gray: #E8E8E5;
    --font-display: 'Cormorant Garamond', serif;
    --font-body: 'DM Sans', sans-serif;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: var(--font-body);
    background: var(--off-white);
    color: var(--black);
    min-height: 100vh;
    font-size: 16px;
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
  }

  /* ── LANG TOGGLE ── */
  #lang-bar {
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 100;
    display: flex;
    justify-content: flex-end;
    align-items: center;
    padding: 10px 20px;
    background: var(--black);
    gap: 4px;
  }
  .lang-btn {
    font-family: var(--font-body);
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    padding: 5px 12px;
    border: 1px solid transparent;
    border-radius: 2px;
    cursor: pointer;
    transition: all 0.2s;
    background: transparent;
    color: var(--mid-gray);
  }
  .lang-btn.active { color: var(--gold); border-color: var(--gold); }
  .lang-btn:hover:not(.active) { color: var(--white); }

  /* ── PROGRESS BAR ── */
  #progress-bar-wrap {
    position: fixed;
    top: 41px; left: 0; right: 0;
    z-index: 99;
    height: 3px;
    background: var(--light-gray);
  }
  #progress-bar {
    height: 100%;
    background: var(--gold);
    transition: width 0.5s cubic-bezier(0.4,0,0.2,1);
    width: 0%;
  }

  /* ── SCREEN SYSTEM ── */
  .screen {
    display: none;
    min-height: 100vh;
    padding-top: 60px;
  }
  .screen.active { display: flex; flex-direction: column; }

  /* ── WELCOME ── */
  #screen-welcome {
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 60px 24px 40px;
  }
  .welcome-inner { max-width: 460px; }
  .welcome-eyebrow {
    font-family: var(--font-body);
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 24px;
  }
  .welcome-title {
    font-family: var(--font-display);
    font-size: clamp(36px, 8vw, 54px);
    font-weight: 700;
    line-height: 1.1;
    color: var(--black);
    margin-bottom: 16px;
  }
  .welcome-sub {
    font-size: 15px;
    color: var(--mid-gray);
    line-height: 1.6;
    margin-bottom: 40px;
  }
  .optional-fields {
    width: 100%;
    margin-bottom: 32px;
  }
  .optional-label {
    font-size: 11px;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--mid-gray);
    margin-bottom: 12px;
    font-weight: 500;
  }
  .opt-input {
    width: 100%;
    padding: 12px 16px;
    border: 1px solid var(--light-gray);
    background: var(--white);
    font-family: var(--font-body);
    font-size: 15px;
    color: var(--black);
    margin-bottom: 8px;
    border-radius: 2px;
    outline: none;
    transition: border-color 0.2s;
  }
  .opt-input:focus { border-color: var(--gold); }
  .opt-input::placeholder { color: #BBBBB8; }

  /* ── BUTTONS ── */
  .btn-primary {
    display: inline-block;
    width: 100%;
    max-width: 320px;
    padding: 16px 32px;
    background: var(--black);
    color: var(--white);
    font-family: var(--font-body);
    font-size: 13px;
    font-weight: 600;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    border: none;
    border-radius: 2px;
    cursor: pointer;
    transition: background 0.2s;
  }
  .btn-primary:hover { background: #2A2A2A; }
  .btn-back {
    background: transparent;
    color: var(--mid-gray);
    border: none;
    font-family: var(--font-body);
    font-size: 12px;
    font-weight: 500;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    cursor: pointer;
    padding: 8px 0;
    transition: color 0.2s;
  }
  .btn-back:hover { color: var(--black); }

  /* ── QUESTION SCREEN ── */
  #screen-question {
    justify-content: space-between;
    padding: 60px 24px 32px;
  }
  .q-header {
    padding-top: 24px;
  }
  .q-counter {
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 8px;
  }
  .q-domain {
    font-size: 11px;
    font-weight: 500;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: var(--mid-gray);
    margin-bottom: 28px;
  }
  .q-text {
    font-family: var(--font-display);
    font-size: clamp(22px, 5.5vw, 32px);
    font-weight: 600;
    line-height: 1.25;
    color: var(--black);
    max-width: 560px;
  }
  .q-body { flex: 1; display: flex; flex-direction: column; justify-content: center; }
  .q-footer { padding-bottom: 8px; }

  /* ── LIKERT ── */
  .likert-wrap {
    margin: 40px 0 32px;
  }
  .likert-labels {
    display: flex;
    justify-content: space-between;
    margin-bottom: 12px;
  }
  .likert-label-text {
    font-size: 10px;
    font-weight: 500;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: var(--mid-gray);
    max-width: 80px;
    text-align: center;
  }
  .likert-buttons {
    display: flex;
    gap: 8px;
    justify-content: space-between;
  }
  .likert-btn {
    flex: 1;
    aspect-ratio: 1;
    max-width: 60px;
    border: 1.5px solid var(--light-gray);
    background: var(--white);
    border-radius: 4px;
    font-family: var(--font-body);
    font-size: 17px;
    font-weight: 500;
    color: var(--black);
    cursor: pointer;
    transition: all 0.15s;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .likert-btn:hover { border-color: var(--gold); background: var(--gold-pale); }
  .likert-btn.selected {
    background: var(--black);
    border-color: var(--black);
    color: var(--white);
  }
  .likert-btn.selected.gold-select {
    background: var(--gold);
    border-color: var(--gold);
  }

  /* ── DIVIDER ── */
  .gold-divider {
    width: 40px;
    height: 2px;
    background: var(--gold);
    margin: 0 auto 20px;
  }

  /* ── RESULTS ── */
  #screen-results {
    padding: 60px 0 0;
    background: var(--white);
    justify-content: flex-start;
  }
  .results-header {
    background: var(--black);
    color: var(--white);
    padding: 32px 24px 28px;
    text-align: center;
  }
  .results-eyebrow {
    font-size: 10px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 10px;
    font-weight: 600;
  }
  .results-title {
    font-family: var(--font-display);
    font-size: clamp(26px, 6vw, 38px);
    font-weight: 700;
    line-height: 1.15;
    color: var(--white);
  }
  .results-body {
    padding: 0 20px 32px;
    max-width: 560px;
    margin: 0 auto;
    width: 100%;
  }
  .score-section {
    padding: 20px 0;
    border-bottom: 1px solid var(--light-gray);
  }
  .score-section:last-of-type { border-bottom: none; }
  .score-section-title {
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 14px;
  }
  .score-row {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
    gap: 12px;
  }
  .score-name {
    font-size: 14px;
    font-weight: 500;
    color: var(--black);
    min-width: 110px;
  }
  .score-bar-wrap {
    flex: 1;
    height: 6px;
    background: var(--light-gray);
    border-radius: 3px;
    overflow: hidden;
  }
  .score-bar-fill {
    height: 100%;
    background: var(--gold);
    border-radius: 3px;
    transition: width 1s cubic-bezier(0.4,0,0.2,1);
  }
  .score-val {
    font-family: var(--font-display);
    font-size: 18px;
    font-weight: 700;
    color: var(--black);
    min-width: 32px;
    text-align: right;
  }
  .score-badge {
    font-size: 9px;
    font-weight: 600;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    padding: 2px 7px;
    border-radius: 2px;
    min-width: 60px;
    text-align: center;
  }
  .badge-strong { background: #0D0D0D; color: var(--white); }
  .badge-moderate { background: var(--gold-pale); color: var(--gold); border: 1px solid var(--gold); }
  .badge-low { background: #F0F0EE; color: var(--mid-gray); }

  .interpretation-box {
    background: var(--gold-pale);
    border-left: 3px solid var(--gold);
    padding: 18px 20px;
    margin: 20px 0;
    border-radius: 0 4px 4px 0;
  }
  .interp-title {
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 10px;
  }
  .interp-text {
    font-size: 14px;
    line-height: 1.65;
    color: var(--black);
  }
  .interp-text p { margin-bottom: 8px; }
  .interp-text p:last-child { margin-bottom: 0; }

  .results-footer {
    text-align: center;
    padding: 16px 24px 32px;
    font-size: 11px;
    color: var(--mid-gray);
    letter-spacing: 0.04em;
  }
  .btn-restart {
    display: block;
    width: calc(100% - 48px);
    max-width: 360px;
    margin: 0 auto 16px;
    padding: 14px;
    background: var(--black);
    color: var(--white);
    font-family: var(--font-body);
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    border: none;
    border-radius: 2px;
    cursor: pointer;
  }

  /* ── FADE TRANSITION ── */
  .fade-enter {
    animation: fadeIn 0.35s ease forwards;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(12px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  /* ── RESPONSIVE ── */
  @media (max-width: 400px) {
    .likert-btn { font-size: 15px; }
    .score-name { min-width: 90px; font-size: 13px; }
  }
  @media (min-width: 600px) {
    #screen-question { padding: 60px 40px 40px; }
    .results-body { padding: 0 32px 40px; }
  }
</style>
</head>
<body>

<!-- LANG BAR -->
<div id="lang-bar">
  <button class="lang-btn active" onclick="setLang('en')">EN</button>
  <button class="lang-btn" onclick="setLang('fr')">FR</button>
</div>

<!-- PROGRESS BAR -->
<div id="progress-bar-wrap"><div id="progress-bar"></div></div>

<!-- ══════════════════════════════
     SCREEN 1: WELCOME
══════════════════════════════ -->
<div id="screen-welcome" class="screen active">
  <div class="welcome-inner fade-enter">
    <div class="welcome-eyebrow" data-i18n="eyebrow">PMI Symposium 2026 · EMBA Executive Seminar</div>
    <h1 class="welcome-title" data-i18n="title">Decision<br>Impact<br>Diagnostic</h1>
    <div class="gold-divider"></div>
    <p class="welcome-sub" data-i18n="subtitle">12 questions · Under 4 minutes<br>Understand how you drive decision velocity, quality, and performance.</p>

    <div class="optional-fields">
      <div class="optional-label" data-i18n="optional">Optional — For your records</div>
      <input class="opt-input" id="field-name" type="text" data-i18n-placeholder="name_ph" placeholder="Your name">
      <input class="opt-input" id="field-email" type="email" data-i18n-placeholder="email_ph" placeholder="Email address">
    </div>

    <button class="btn-primary" onclick="startDiagnostic()" data-i18n="start">Begin Diagnostic</button>
  </div>
</div>

<!-- ══════════════════════════════
     SCREEN 2: QUESTION
══════════════════════════════ -->
<div id="screen-question" class="screen">
  <div class="q-header fade-enter">
    <div class="q-counter" id="q-counter"></div>
    <div class="q-domain" id="q-domain"></div>
    <div class="q-text" id="q-text"></div>
  </div>

  <div class="q-body">
    <div class="likert-wrap fade-enter">
      <div class="likert-labels">
        <span class="likert-label-text" id="scale-label-disagree"></span>
        <span class="likert-label-text" id="scale-label-agree"></span>
      </div>
      <div class="likert-buttons" id="likert-buttons"></div>
    </div>
  </div>

  <div class="q-footer">
    <button class="btn-back" id="btn-back" onclick="goBack()">← <span data-i18n="back">Back</span></button>
  </div>
</div>

<!-- ══════════════════════════════
     SCREEN 3: RESULTS
══════════════════════════════ -->
<div id="screen-results" class="screen">
  <div class="results-header">
    <div class="results-eyebrow" data-i18n="results_eyebrow">Your Decision Impact Profile</div>
    <div class="results-title" data-i18n="results_title">Decision<br>Impact<br>Profile</div>
  </div>

  <div class="results-body">

    <div class="score-section">
      <div class="score-section-title" data-i18n="sec_domains">Domain Strength</div>
      <div id="domain-scores"></div>
    </div>

    <div class="score-section">
      <div class="score-section-title" data-i18n="sec_impact">Decision Impact</div>
      <div id="impact-scores"></div>
    </div>

    <div class="score-section">
      <div class="score-section-title" data-i18n="sec_conditions">Conditions</div>
      <div id="conditions-scores"></div>
    </div>

    <div class="interpretation-box">
      <div class="interp-title" data-i18n="interp_title">Your Profile Insight</div>
      <div class="interp-text" id="interpretation-text"></div>
    </div>

    <button class="btn-restart" onclick="restartApp()" data-i18n="restart">Retake Diagnostic</button>
  </div>
  <div class="results-footer" data-i18n="footer">Beta version — For reflection and workshop use only.</div>
</div>

<!-- ══════════════════════════════
     JS
══════════════════════════════ -->
<script>
// ── I18N ──────────────────────────────────────────────────────────
const i18n = {
  en: {
    eyebrow: "PMI Symposium 2026 · EMBA Executive Seminar",
    title: "Decision<br>Impact<br>Diagnostic",
    subtitle: "12 questions · Under 4 minutes<br>Understand how you drive decision velocity, quality, and performance.",
    optional: "Optional — For your records",
    name_ph: "Your name",
    email_ph: "Email address",
    start: "Begin Diagnostic",
    back: "Back",
    results_eyebrow: "Your Decision Impact Profile",
    results_title: "Decision<br>Impact<br>Profile",
    sec_domains: "Domain Strength",
    sec_impact: "Decision Impact",
    sec_conditions: "Conditions",
    interp_title: "Your Profile Insight",
    restart: "Retake Diagnostic",
    footer: "Beta version — For reflection and workshop use only.",
    q_of: "Question {n} of 12",
    scale_disagree: "Strongly Disagree",
    scale_agree: "Strongly Agree",
    scale_labels: ["Strongly Disagree","Disagree","Neutral","Agree","Strongly Agree"],
    domains: ["Decision Governance","Enterprise Architecture","Information Discipline","Adaptive Judgment"],
    domain_short: ["Governance","Enterprise","Information","Judgment"],
    impact_labels: ["Velocity","Quality","Performance"],
    condition_labels: ["Convergence","Capability","Environment"],
    badge_strong: "Strong",
    badge_moderate: "Moderate",
    badge_low: "Low",
  },
  fr: {
    eyebrow: "PMI Symposium 2026 · Séminaire EMBA",
    title: "Diagnostic<br>d'Impact<br>Décisionnel",
    subtitle: "12 questions · Moins de 4 minutes<br>Comprenez comment vous générez vélocité, qualité et performance décisionnelle.",
    optional: "Optionnel — Pour votre dossier",
    name_ph: "Votre nom",
    email_ph: "Adresse courriel",
    start: "Commencer le diagnostic",
    back: "Retour",
    results_eyebrow: "Votre Profil Décisionnel",
    results_title: "Profil<br>d'Impact<br>Décisionnel",
    sec_domains: "Force des Domaines",
    sec_impact: "Impact Décisionnel",
    sec_conditions: "Conditions",
    interp_title: "Aperçu de votre profil",
    restart: "Recommencer le diagnostic",
    footer: "Version bêta — À des fins de réflexion et d'atelier uniquement.",
    q_of: "Question {n} sur 12",
    scale_disagree: "Pas du tout d'accord",
    scale_agree: "Tout à fait d'accord",
    scale_labels: ["Pas du tout d'accord","Pas d'accord","Neutre","D'accord","Tout à fait d'accord"],
    domains: ["Gouvernance Décisionnelle","Architecture d'Entreprise","Discipline de l'Information","Jugement Adaptatif"],
    domain_short: ["Gouvernance","Entreprise","Information","Jugement"],
    impact_labels: ["Vélocité","Qualité","Performance"],
    condition_labels: ["Convergence","Capacité","Environnement"],
    badge_strong: "Fort",
    badge_moderate: "Modéré",
    badge_low: "Faible",
  }
};

// ── QUESTIONS ────────────────────────────────────────────────────
const questions_raw = [
  { id:1,  domain:0, reverse:false,
    en:"I clarify who decides, who contributes, and who is accountable before execution begins.",
    fr:"Je clarifie qui décide, qui contribue et qui est responsable avant l'exécution." },
  { id:2,  domain:0, reverse:false,
    en:"I document key decisions and the reasoning behind them so they can be revisited later.",
    fr:"Je documente les décisions clés et leur raisonnement pour pouvoir les revisiter." },
  { id:3,  domain:0, reverse:true,
    en:"When ownership is unclear, I move forward anyway to maintain momentum.",
    fr:"Lorsque la responsabilité est floue, j'avance quand même pour garder le rythme." },
  { id:4,  domain:1, reverse:false,
    en:"Before committing to a decision, I assess cross-team and cross-system impacts.",
    fr:"Avant de prendre une décision, j'évalue les impacts interéquipes et intersystèmes." },
  { id:5,  domain:1, reverse:false,
    en:"When I identify structural bottlenecks, I address or escalate them instead of working around them.",
    fr:"Lorsque j'identifie un goulot d'étranglement structurel, je l'aborde ou l'escalade au lieu de le contourner." },
  { id:6,  domain:1, reverse:true,
    en:"I prioritize my team's success, even if the broader system absorbs the cost.",
    fr:"Je priorise le succès de mon équipe, même si le système global en absorbe le coût." },
  { id:7,  domain:2, reverse:false,
    en:"I confirm shared definitions and assumptions before interpreting data.",
    fr:"Je confirme les définitions et hypothèses partagées avant d'interpréter les données." },
  { id:8,  domain:2, reverse:false,
    en:"I use only the information needed to decide and clearly state what is missing.",
    fr:"J'utilise uniquement l'information nécessaire pour décider et j'indique clairement ce qui manque." },
  { id:9,  domain:2, reverse:true,
    en:"I trust dashboards and metrics even when data quality or lineage is unclear.",
    fr:"Je fais confiance aux tableaux de bord même si la qualité ou la traçabilité des données est incertaine." },
  { id:10, domain:3, reverse:false,
    en:"Under uncertainty, I state assumptions, trade-offs, and defend my reasoning.",
    fr:"En situation d'incertitude, j'expose mes hypothèses, compromis et raisonnement." },
  { id:11, domain:3, reverse:false,
    en:"I regularly review decision outcomes to improve future decisions.",
    fr:"Je revois régulièrement les résultats des décisions pour améliorer les suivantes." },
  { id:12, domain:3, reverse:true,
    en:"I delay decisions until uncertainty is significantly reduced.",
    fr:"Je retarde les décisions jusqu'à ce que l'incertitude soit fortement réduite." },
];

// ── STATE ─────────────────────────────────────────────────────────
let lang = 'en';
let questionOrder = [];
let currentIdx = 0;
let answers = {}; // id → raw score

function setLang(l) {
  lang = l;
  document.querySelectorAll('.lang-btn').forEach(b => b.classList.toggle('active', b.textContent.toLowerCase().trim() === l));
  applyI18n();
  updateQuestion();
}

function applyI18n() {
  const t = i18n[lang];
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (t[key] !== undefined) el.innerHTML = t[key];
  });
  document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
    const key = el.getAttribute('data-i18n-placeholder');
    if (t[key] !== undefined) el.placeholder = t[key];
  });
}

// ── SHUFFLE ───────────────────────────────────────────────────────
function shuffle(arr) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

// ── SCREENS ──────────────────────────────────────────────────────
function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

// ── START ─────────────────────────────────────────────────────────
function startDiagnostic() {
  questionOrder = shuffle(questions_raw.map((_, i) => i));
  currentIdx = 0;
  answers = {};
  showScreen('screen-question');
  updateQuestion();
  updateProgress();
}

// ── QUESTION RENDER ──────────────────────────────────────────────
function updateQuestion() {
  if (currentIdx >= questionOrder.length) { showResults(); return; }
  const q = questions_raw[questionOrder[currentIdx]];
  const t = i18n[lang];

  document.getElementById('q-counter').textContent = t.q_of.replace('{n}', currentIdx + 1);
  document.getElementById('q-domain').textContent = t.domains[q.domain];
  document.getElementById('q-text').textContent = q[lang];
  document.getElementById('scale-label-disagree').textContent = t.scale_disagree;
  document.getElementById('scale-label-agree').textContent = t.scale_agree;

  const btnWrap = document.getElementById('likert-buttons');
  btnWrap.innerHTML = '';
  const selected = answers[q.id];
  for (let v = 1; v <= 5; v++) {
    const btn = document.createElement('button');
    btn.className = 'likert-btn' + (selected === v ? ' selected' : '');
    btn.textContent = v;
    btn.setAttribute('aria-label', t.scale_labels[v-1]);
    btn.onclick = () => selectAnswer(q.id, v);
    btnWrap.appendChild(btn);
  }

  document.getElementById('btn-back').style.visibility = currentIdx === 0 ? 'hidden' : 'visible';
  updateProgress();
}

function selectAnswer(qid, val) {
  answers[qid] = val;
  // Animate selection then advance
  const btns = document.querySelectorAll('.likert-btn');
  btns.forEach((b, i) => {
    b.classList.toggle('selected', i + 1 === val);
  });
  setTimeout(() => {
    currentIdx++;
    updateQuestion();
  }, 280);
}

function goBack() {
  if (currentIdx > 0) {
    currentIdx--;
    updateQuestion();
  } else {
    showScreen('screen-welcome');
  }
}

function updateProgress() {
  const pct = (currentIdx / 12) * 100;
  document.getElementById('progress-bar').style.width = pct + '%';
}

// ── SCORING ───────────────────────────────────────────────────────
function score(id) {
  const q = questions_raw.find(q => q.id === id);
  const raw = answers[id] || 3;
  return q.reverse ? 6 - raw : raw;
}

function avg(ids) {
  return ids.reduce((s, id) => s + score(id), 0) / ids.length;
}

function badge(val, t) {
  if (val >= 3.8) return `<span class="score-badge badge-strong">${t.badge_strong}</span>`;
  if (val >= 2.5) return `<span class="score-badge badge-moderate">${t.badge_moderate}</span>`;
  return `<span class="score-badge badge-low">${t.badge_low}</span>`;
}

function renderScoreRow(name, val, t, container) {
  const pct = ((val - 1) / 4) * 100;
  const row = document.createElement('div');
  row.className = 'score-row';
  row.innerHTML = `
    <span class="score-name">${name}</span>
    <div class="score-bar-wrap"><div class="score-bar-fill" style="width:0%"></div></div>
    <span class="score-val">${val.toFixed(1)}</span>
    ${badge(val, t)}
  `;
  container.appendChild(row);
  setTimeout(() => {
    row.querySelector('.score-bar-fill').style.width = pct + '%';
  }, 100);
}

// ── RESULTS ──────────────────────────────────────────────────────
function showResults() {
  document.getElementById('progress-bar').style.width = '100%';
  const t = i18n[lang];

  // Domain scores
  const domainScores = [
    avg([1,2,3]),
    avg([4,5,6]),
    avg([7,8,9]),
    avg([10,11,12]),
  ];

  // Impact (VQP)
  const velocity    = avg([1,5,8,10,3,12]);  // Q3,Q12 already reversed in score()
  const quality     = avg([2,4,7,10,11,9]);
  const performance = avg([4,5,7,11,6]);

  // Conditions
  const convergence  = avg([1,4,7,10,3]);
  const capability   = avg([2,8,10,11,12]);
  const environment  = avg([4,5,8,6,9]);

  // Render domains
  const domEl = document.getElementById('domain-scores');
  domEl.innerHTML = '';
  domainScores.forEach((v, i) => renderScoreRow(t.domain_short[i], v, t, domEl));

  // Render impact
  const impEl = document.getElementById('impact-scores');
  impEl.innerHTML = '';
  [velocity, quality, performance].forEach((v, i) => renderScoreRow(t.impact_labels[i], v, t, impEl));

  // Render conditions
  const conEl = document.getElementById('conditions-scores');
  conEl.innerHTML = '';
  [convergence, capability, environment].forEach((v, i) => renderScoreRow(t.condition_labels[i], v, t, conEl));

  // Interpretation
  const impacts = [velocity, quality, performance];
  const impMax = impacts.indexOf(Math.max(...impacts));
  const conds = [convergence, capability, environment];
  const conMin = conds.indexOf(Math.min(...conds));

  const interp_en = [
    ["You enable movement. Ensure alignment keeps pace with speed.",
     "You enable rigor. Guard against analysis slowing commitment.",
     "You think systemically. Maintain governance clarity to sustain results."],
    ["Alignment gaps may be limiting decision consistency.",
     "Stronger reasoning discipline will elevate your decision impact.",
     "Greater system awareness will strengthen execution outcomes."],
  ];
  const interp_fr = [
    ["Vous générez du mouvement. Assurez que l'alignement suive la vitesse.",
     "Vous cultivez la rigueur. Veillez à ce que l'analyse ne freine pas l'engagement.",
     "Vous pensez de façon systémique. Maintenez la clarté de gouvernance pour des résultats durables."],
    ["Des lacunes d'alignement limitent peut-être la cohérence décisionnelle.",
     "Une discipline de raisonnement plus forte élèvera votre impact décisionnel.",
     "Une meilleure conscience du système renforcera vos résultats d'exécution."],
  ];

  const interp = lang === 'fr' ? interp_fr : interp_en;
  document.getElementById('interpretation-text').innerHTML =
    `<p>${interp[0][impMax]}</p><p>${interp[1][conMin]}</p>`;

  showScreen('screen-results');
}

function restartApp() {
  showScreen('screen-welcome');
  document.getElementById('progress-bar').style.width = '0%';
}

// ── INIT ──────────────────────────────────────────────────────────
applyI18n();
</script>
</body>
</html>
